{% load static %}
<html>
    <head>
        <script type="text/javascript" src="{% static "ckeditor/ckeditor-init.js" %}"></script>
        <script type="text/javascript" src="{% static "ckeditor/ckeditor/ckeditor.js" %}"></script>
        <script src="//cdn.ckeditor.com/4.4.5/standard/ckeditor.js"></script>
        <script type="text/javascript" src="ckeditor/ckeditor-init.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
        <script>
        CKEDITOR.replace('.richtexteditor')
        </script>
    </head>
    <body>
            <div id="form_set">
            <form method="post" action="">
                    {% csrf_token %}
                    {{ form.as_p }}
                    {{ formset.management_form }}
                    
                    {% for myform in formset %}
            <br><br>ID:{{ myform.id.value }}
                       {{ myform.as_p }} 
                       <!-- <input type="button" onclick="location.href='delete/{{myform.id.value}}';" value="Delete"/> -->
                       <a href="/delete/{{ myform.id.value }}" > Delete {{ myform.id }}</a>
                    
                    {% endfor %}
                    
            </br></br>

                    <button type= submit  >Submit </button>
                    
            </form>
            </div>
            </br>
            <input type="button" value="Add More Slide" id="add_more">
            <a href="" class="add-row">Add more slide</a>
            
            <div id="empty_form" style="display:none" class="empty_form">
                
                {% for myform in formset %}
                <br></br>ID:{{ myform.id.value }}
                {{ myform.as_p }}
                <a href="/delete/{{ myform.id.value }}"> Delete {{ myform.id }}</a>
                {% endfor %}
    
            </div>
            <script>
                // $('#add_more').click(function() {
                // var form_idx = $('#id_form-TOTAL_FORMS').val();
                // $('#form_set').append($('#empty_form').html().replace(/__prefix__/g, form_idx));
                // $('#id_form-TOTAL_FORMS').val(parseInt(form_idx) + 1);
                // });

                (function($) {
                $('.add-row').click(function() {
                $(document).on('formset:added', function newForm(event, row) {
                row.find('textarea').each(function() {
                CKEDITOR.replace(this.id);
                });});});
                })(django.jQuery);


            </script>
    </body>
</html>